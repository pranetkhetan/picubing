"use strict";function AnimCube5(e){var t,r,n,o,a,f,i,l,u,c,s,h,v,d,g,m,b,M,p,k,L,w,y,R,A,T,D,S,F,B,E,x,U,I,P,C,W,X,Y,q,O,Q,N=[],Z=[],z=[],H=[],G=[],K=[],j=[[0,-1,0],[0,1,0],[0,0,-1],[0,0,1],[-1,0,0],[1,0,0]],J=[[-1,-1,-1],[1,-1,-1],[1,-1,1],[-1,-1,1],[-1,1,-1],[1,1,-1],[1,1,1],[-1,1,1]],V=[[0,1,2,3],[4,7,6,5],[0,4,5,1],[2,6,7,3],[0,3,7,4],[1,5,6,2]],$=[[0,3,2,1],[0,3,2,1],[3,2,1,0],[3,2,1,0],[0,3,2,1],[0,3,2,1]],_=[[2,5,3,4],[4,3,5,2],[4,1,5,0],[5,1,4,0],[0,3,1,2],[2,1,3,0]],ee=[1,1,-1,-1,-1,-1],te=[0,0,-1],re=[1,0,0],ne=[],oe=[],ae=[],fe=[],ie=!0,le=[],ue=[],ce=[],se=!0,he=-1,ve=6,de=12,ge=!0,me=!1,be=!1,Me=!1,pe=!1,ke=0,Le=0,we=0,ye=0,Re=[3,2,0,5,1,4],Ae=[[20,15,10,5,0,21,16,11,6,1,22,17,12,7,2,23,18,13,8,3,24,19,14,9,4],[4,9,14,19,24,3,8,13,18,23,2,7,12,17,22,1,6,11,16,21,0,5,10,15,20],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24],[20,15,10,5,0,21,16,11,6,1,22,17,12,7,2,23,18,13,8,3,24,19,14,9,4],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24]];function Te(){var e=Se("config");null!=e?function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){4==t.readyState&&(200==t.status?function(e){for(var t=e.split("\n"),r=0;r<t.length;r++){var n=t[r].split("=");void 0!==n[1]&&(N[n[0]]=n[1].trim())}}(t.responseText):console.log("Error loading config file: "+e),De())},t.open("GET",e,!0),t.send()}(e):De()}function De(){Z[0]=Cr(255,128,64),Z[1]=Cr(255,0,0),Z[2]=Cr(0,255,0),Z[3]=Cr(0,0,255),Z[4]=Cr(153,153,153),Z[5]=Cr(170,170,68),Z[6]=Cr(187,119,68),Z[7]=Cr(153,68,68),Z[8]=Cr(68,119,68),Z[9]=Cr(0,68,119),Z[10]=Cr(255,255,255),Z[11]=Cr(255,255,0),Z[12]=Cr(255,96,32),Z[13]=Cr(208,0,0),Z[14]=Cr(0,144,0),Z[15]=Cr(32,64,208),Z[16]=Cr(176,176,176),Z[17]=Cr(80,80,80),Z[18]=Cr(255,0,255),Z[19]=Cr(0,255,255),Z[20]=Cr(255,160,192),Z[21]=Cr(32,255,16),Z[22]=Cr(0,0,0),Z[23]=Cr(128,128,128);var e=Se("bgcolor");if(t=null!=e&&6==e.length&&Xr(e)?"#"+e:"gray",e=Se("butbgcolor"),o=null!=e&&6==e.length&&Xr(e)?"#"+e:t,null!=(e=Se("colors")))for(var u=0;u<10&&u<e.length/6;u++)Xr(e.substring(6*u,6*u+6))&&(Z[u]="#"+e.substring(6*u,6*u+6));for(u=0;u<6;u++)for(var c=0;c<25;c++)z[u][c]=u+10;if(null!=(e=Se("supercube"))&&"1"==e){Me=!0,Fe(.06);for(u=0;u<25;u++)z[0][u]=22;null!=(e=Se("scw"))&&("1"==e?we=1:"2"==e&&(we=2)),1==we&&(Z[10]="#000000")}if(null!=(e=Se("gabbacolors"))&&"1"==e&&(1==Me?(Z[11]="#fdcf00",Z[12]="#fd4e0a",Z[13]="#93000d",Z[14]="#00702d",Z[15]="#00347a"):(Fe(.06),Z[11]="#ffd90a",Z[12]="#ff4f0b",Z[13]="#9e0b19",Z[14]="#0b7d39",Z[15]="#0b4186")),null!=(e=Se("borderwidth"))){for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(ye=10*ye+parseInt(e[u]));ye>=0&&ye<=20&&Fe(ye/100)}if(Me)for(u=0;u<6;u++)for(c=0;c<25;c++)H[u][c]=0;var s="lluu";if(null!=(e=Se("colorscheme"))&&6==e.length)for(u=0;u<6;u++){var h=23;for(c=0;c<23;c++)if(e[u].toLowerCase()=="0123456789wyorgbldmcpnk".charAt(c)){h=c;break}for(c=0;c<25;c++)z[u][c]=h}if("1"==(e=Se("scramble"))?ke=1:"2"==e&&(ke=2),2==ke)for(u=0;u<6;u++)for(c=0;c<25;c++)G[u][c]=z[u][c],K[u][c]=H[u][c];if(0==ke){if(null!=(e=Se("pos"))&&150==e.length){s="uuuuff","gray"==t&&(t="white");for(u=0;u<6;u++){var g=Re[u];for(c=0;c<25;c++){var m=Ae[u][c];z[g][m]=23;for(var b=0;b<14;b++)if(e.charAt(25*u+c)=="DFECABdfecabgh".charAt(b)){z[g][m]=b+4;break}}}}if(null!=(e=Se("facelets"))&&150==e.length)for(u=0;u<6;u++)for(c=0;c<25;c++){z[u][c]=23;for(b=0;b<23;b++)if(e[25*u+c].toLowerCase()=="0123456789wyorgbldmcpnk".charAt(b)){z[u][c]=b;break}}if(null!=(e=Se("superfacelets"))&&150==e.length)for(u=0;u<6;u++)for(c=0;c<25;c++)for(b=0;b<4;b++)if(e[25*u+c].toLowerCase()=="0123".charAt(b)){H[u][c]=b;break}}if(null!=(e=Se("randmoves"))){var M=0;for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(M=10*M+parseInt(e[u]));M>0&&(Le=M)}if(("random"==(e=Se("move"))||ke>0)&&(e=yn(5,Le)),le=null==e?[]:xe(e,!0),U=0,X=-1,0==ke&&null!=(e=Se("initmove"))){"random"==e&&(e=yn(5,Le));var w="#"==e?le:xe(e,!1);w.length>0&&ze(z,w[0],0,w[0].length,!1)}if(e=Se("initrevmove"),1==ke?e=null:2==ke&&(e="#"),null!=e){"random"==e&&(e=yn(5,Le));var y="#"==e?le:xe(e,!1);y.length>0&&ze(z,y[0],0,y[0].length,!0)}0==ke&&null!=(e=Se("demo"))&&("random"==e&&(e=yn(5,Le)),(ue="#"==e?le:xe(e,!0)).length>0&&ue[0].length>0&&(T=!0)),e=Se("position"),Dr(xr(ne,te,re)),null==e&&(e=s);var R=Math.PI/12;for(u=0;u<e.length;u++){var A=R;switch(e[u].toLowerCase()){case"d":A=-A;case"u":Ir(te,A),Ir(re,A);break;case"f":A=-A;case"b":Pr(te,A),Pr(re,A);break;case"l":A=-A;case"r":Ur(te,A),Ur(re,A)}}if(Dr(xr(ne,te,re)),v=0,d=0,null!=(e=Se("speed")))for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(v=10*v+parseInt(e[u]));if(null!=(e=Se("doublespeed")))for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(d=10*d+parseInt(e[u]));if(0==v&&(v=10),0==d&&(d=3*v/2),D=0,null==(e=Se("perspective")))D=2;else for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(D=10*D+parseInt(e[u]));var x,I=0;if(null!=(e=Se("scale")))for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(I=10*I+parseInt(e[u]));if(S=1/(1+I/10),B=!1,null!=(e=Se("hint"))){B=!0,E=0;for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(E=10*E+parseInt(e[u]));E<1?B=!1:E/=10}(q=13,null!=(e=Se("buttonheight")))&&((x=parseInt(e))>=9&x<=25&&(q=x));(ve=0==le.length?0:6,Y=1,"0"==(e=Se("buttonbar"))?(Y=0,q=0,ve=0):"1"==e?Y=1:"2"!=e&&0!=le.length||(Y=2,ve=0),e=Se("edit"),p="0"!=e,e=Se("repeat"),k="0"!=e,e=Se("clickprogress"),L="0"!=e,e=Se("movetext"),Q="1"==e?1:0,null!=(e=Se("textsize")))&&((x=parseInt(e))>=5&x<=40&&(de=x));if(e=Se("fonttype"),ge=null==e||"1"==e,W=0,null!=(e=Se("metric"))&&("1"==e?W=1:"2"==e?W=2:"3"==e&&(W=3)),F=1,null!=(e=Se("align"))&&("0"==e?F=0:"1"==e?F=1:"2"==e&&(F=2)),null!=(e=Se("ww"))&&"1"==e&&(me=!0),null!=(e=Se("snap"))&&"1"==e&&(be=!0),2!=ke)for(u=0;u<6;u++)for(c=0;c<25;c++)G[u][c]=z[u][c],K[u][c]=H[u][c];for(u=0;u<3;u++)oe[u]=te[u],ae[u]=re[u],fe[u]=ne[u];jr(t)<128?(n="white",r=function(e){"#"!=e.substring(0,1)&&(e=Kr(e));var t=parseInt(e.substring(1,3),16),r=parseInt(e.substring(3,5),16),n=parseInt(e.substring(5,7),16);return t=Math.floor(1.3*t),r=Math.floor(1.3*r),n=Math.floor(1.3*n),Cr(t>255?255:t,r>255?255:r,n>255?255:n)}(t)):(n="black",r=Jr(t)),i=jr(o)<128?"white":"black",a=n,null!=(e=Se("slidercolor"))&&6==e.length&&Xr(e)&&(a="#"+e),f=Jr(t),null!=(e=Se("sliderbgcolor"))&&6==e.length&&Xr(e)&&(f="#"+e),null!=(e=Se("troughcolor"))&&6==e.length&&Xr(e)&&(f="#"+e),l="black",null!=(e=Se("cubecolor"))&&6==e.length&&Xr(e)&&(l="#"+e),X=-1,un=ln.getContext("2d"),vn=q,dn=ve,gn=de,wn(),mn.appendChild(ln),lr(),T&&Ke(-1)}function Se(e){var t=Rn[e];return void 0===t?N[e]:t}function Fe(e){mr[0][0]=mr[0][1]=mr[1][1]=mr[3][0]=e,mr[1][0]=mr[2][0]=mr[2][1]=mr[3][1]=1-e}var Be=[0,0,0,0,0,0,1,1,1,3,3,3,3,3,3,2,2,2,2,2,2],Ee=[0,1,2,3,4,5,1,2,4,5,2,0,5,2,0,0,1,2,3,4,5];function xe(e,t){if(t){for(var r=e.indexOf("{");-1!=r;)0,r=e.indexOf("{",r+1);if(null==ce)X=0,ce=[];else{for(var n=[],o=0;o<ce.length;o++)n[o]=ce[o];X=ce.length,ce=n}}var a=1;for(r=e.indexOf(";");-1!=r;)a++,r=e.indexOf(";",r+1);var f=[],i=0;for(r=e.indexOf(";"),a=0;-1!=r;)f[a++]=Ie(e.substring(i,r),t),i=r+1,r=e.indexOf(";",i);return f[a]=Ie(e.substring(i),t),f}var Ue=["n","t","c","s","a","m"];function Ie(e,t){for(var r=0,n=[],o=0;o<e.length;o++)if("."==e.charAt(o))n[r]=-1,r++;else if("{"==e.charAt(o)){o++;for(var a="";o<e.length&&"}"!=e.charAt(o);)t&&(a+=e.charAt(o)),o++;t&&(ce[X]=a,n[r]=1e3+X,X++,r++)}else for(var f=0;f<21;f++)if(e.charAt(o)=="UDFBLRESMXYZxyzudfblr".charAt(f)){o++;var i=Be[f];if(n[r]=28*Ee[f],o<e.length&&0==Be[f])for(var l=0;l<Ue.length;l++)if(e.charAt(o)==Ue[l]){i=l+1,o++;break}n[r]+=4*i,o<e.length&&("1"==e.charAt(o)?o++:"'"==e.charAt(o)||"3"==e.charAt(o)?(n[r]+=2,o++):"2"==e.charAt(o)&&(++o<e.length&&"'"==e.charAt(o)?(n[r]+=3,o++):n[r]+=1)),r++,o--;break}var u=[];for(o=0;o<r;o++)u[o]=n[o];return u}function Pe(e,t,r){if(t>=e.length)return"";for(var n="",o=t;o<r;o++)n+=Xe(e,o);return n}var Ce=[[["U","D","F","B","L","R"],["Un","Dn","Fn","Bn","Ln","Rn"],["Ut","Dt","Ft","Bt","Lt","Rt"],["Uc","Dc","Fc","Bc","Lc","Rc"],["Us","Ds","Fs","Bs","Ls","Rs"],["Ua","Da","Fa","Ba","La","Ra"],["Um","Dm","Fm","Bm","Lm","Rm"]],[["U","D","F","B","L","R"],["Un","Dn","Fn","Bn","Ln","Rn"],["u","d","f","b","l","r"],["Z","~Z","Y","~Y","~X","X"],["Us","Ds","Fs","Bs","Ls","Rs"],["Ua","Da","Fa","Ba","La","Ra"],["~E","E","S","~S","M","~M"]],[["U","D","F","B","L","R"],["Un","Dn","Fn","Bn","Ln","Rn"],["u","d","f","b","l","r"],["Y","~Y","Z","~Z","~X","X"],["Us","Ds","Fs","Bs","Ls","Rs"],["Ua","Da","Fa","Ba","La","Ra"],["~E","E","S","~S","M","~M"]],[["U","D","F","B","L","R"],["Un","Dn","Fn","Bn","Ln","Rn"],["Uu","Dd","Ff","Bb","Ll","Rr"],["QU","QD","QF","QB","QL","QR"],["UD'","DU'","FB'","BF'","LR'","RL'"],["UD","DU","FB","BF","LR","RL"],["u","d","f","b","l","r"]]],We=["","2","'","2'"];function Xe(e,t){if(t>=e.length)return"";if(e[t]>=1e3)return"";if(-1==e[t])return".";var r=Ce[Q-1][Math.floor(e[t]/4)%7][Math.floor(e[t]/28)];return"~"==r.charAt(0)?r.substring(1)+We[(e[t]+2)%4]:r+We[e[t]%4]}var Ye=["","q","h","s"];function qe(e){for(var t=0,r=0;r<e.length;r++)e[r]<1e3&&t++;return t}function Oe(e,t){for(var r=0,n=0;;){for(;r<e.length&&e[r]>=1e3;)r++;if(n==t)break;r<e.length&&(n++,r++)}return r}function Qe(e,t){for(var r=0,n=0;n<e.length&&(n<t||t<0);n++)r+=Ne(e[n]);return r}function Ne(e){if(e<0||e>=1e3)return 0;var t=e%4,r=Math.floor(e/4)%7,n=1;switch(W){case 1:1!=t&&3!=t||(n*=2);case 2:(1==r||r>3)&&(n*=2);case 3:3==r&&(n=0),3!=W||4!=r&&5!=r||(n*=2)}return n}function Ze(e){X=e.length>0&&e[0]>=1e3?e[0]-1e3:-1}function ze(e,t,r,n,o){for(var a=o?r+n:r;;){if(o){if(a<=r)break;a--}if(t[a]>=1e3)X=o?-1:t[a]-1e3;else if(t[a]>=0){var f=t[a]%4+1,i=Math.floor(t[a]/4)%7;4==f&&(f=2),o&&(f=4-f),st(e,Math.floor(t[a]/28),f,i)}if(!o&&++a>=r+n)break}}var He=0,Ge=0;function Ke(e){if(je(),(T||0!=le.length&&0!=le[x].length)&&(!T||0!=ue.length&&0!=ue[0].length)){switch(I=1,P=!1,C=!0,e){case 0:break;case 1:I=-1;break;case 2:P=!0;break;case 3:I=-1,P=!0;break;case 4:C=!1}Vr(He++,I)}}function je(){1==R&&(b=!0)}function Je(){U=0,le.length>0&&Ze(le[x]),ie=!0,M=!1;for(var e=0;e<6;e++)for(var t=0;t<25;t++)z[e][t]=G[e][t],H[e][t]=K[e][t];ke>0&&(le=xe(yn(5,Le),!1)),2==ke&&ze(z,le[0],0,le[0].length,!0);for(e=0;e<3;e++)te[e]=oe[e],re[e]=ae[e],ne[e]=fe[e]}var Ve=[[[0,5],[0,5]],[[0,5],[0,5]],[[0,5],[0,5]],[[0,5],[0,5]],[[0,5],[0,5]],[[0,5],[0,5]]],$e=[],_e=[],et=[],tt=[],rt=[],nt=[[[0,0],[0,0]],[[0,5],[0,5]],[[0,5],[0,1]],[[0,1],[0,5]],[[0,5],[4,5]],[[4,5],[0,5]],[[0,5],[0,2]],[[0,2],[0,5]],[[0,5],[3,5]],[[3,5],[0,5]]],ot=[[1,0,3,3,2,3],[0,1,5,5,4,5],[2,3,1,0,3,2],[4,5,0,1,5,4],[3,2,2,4,1,0],[5,4,4,2,0,1]],at=[[0,1,5,5,4,5],[1,0,3,3,2,3],[4,5,0,1,5,4],[2,3,1,0,3,2],[5,4,4,2,0,1],[3,2,2,4,1,0]],ft=[[[0,0],[0,0]],[[0,4],[1,3]],[[1,3],[0,4]],[[0,5],[3,4]],[[0,5],[1,2]],[[3,4],[0,5]],[[1,2],[0,5]],[[2,3],[0,5]],[[0,5],[2,3]]],it=[[0,0,6,6,4,6],[0,0,5,5,3,5],[4,6,0,0,6,4],[3,5,0,0,5,3],[6,4,4,3,0,0],[5,3,3,4,0,0]],lt=[[0,0,7,7,8,7],[0,0,7,7,8,7],[8,7,0,0,7,8],[8,7,0,0,7,8],[7,8,8,8,0,0],[7,8,8,8,0,0]],ut=[[0,0,5,5,3,5],[0,0,6,6,4,6],[3,5,0,0,5,3],[4,6,0,0,6,4],[5,3,3,4,0,0],[6,4,4,3,0,0]];function ct(e){for(var t=0;t<6;t++)$e[t]=nt[ot[e][t]],rt[t]=nt[at[e][t]],_e[t]=ft[it[e][t]],et[t]=ft[lt[e][t]],tt[t]=ft[ut[e][t]];ie=!1}function st(e,t,r,n){switch(n){case 2:pt(e,t,4-r,0),pt(e,t,4-r,1);break;case 3:pt(e,t,4-r,0),pt(e,t,4-r,1),pt(e,t,4-r,6),pt(e,1^t,r,1),pt(e,1^t,r,0);break;case 4:pt(e,t,4-r,0),pt(e,1^t,r,0);break;case 5:pt(e,1^t,4-r,0),pt(e,t,4-r,0);break;default:pt(e,t,4-r,n)}}var ht=[0,1,2,3,4,9,14,19,24,23,22,21,20,15,10,5],vt=[6,7,8,13,18,17,16,11],dt=[1,5,-1,-5,1,5,-1,-5],gt=[0,4,24,20,5,3,19,21,10,2,14,22],mt=[[3,3,3,0],[2,1,1,1],[3,3,0,0],[2,1,1,2],[3,2,0,0],[2,2,0,1]],bt=[[7,7,7,4],[6,5,5,5],[7,7,4,4],[6,5,5,6],[7,6,4,4],[6,6,4,5]],Mt=[];function pt(e,t,r,n){kt(e,t,r,n),1==Me&&r>0&&r<4&&(kt(H,t,r,n),function(e,t,r){if(6==r)return 4==e&&(Ft(10,1,3),1==t?Ft(10,1,1):2==t?Ft(10,1,2):3==t&&Ft(2,5,0)),5==e&&(Ft(10,1,3),1==t?Ft(2,5,0):2==t?Ft(10,1,2):3==t&&Ft(10,1,1)),2==e&&Bt(4,4-t),void(3==e&&Bt(4,t));var n=1==r;if(0==n)for(var o=0;o<25;o++)H[e][o]=(H[e][o]+4-t)%4;4==e&&(0==n&&(Ft(20,1,3),1==t?Ft(0,1,1):2==t?Ft(0,1,2):3==t&&Ft(0,5,0)),1==n&&(Ft(15,1,3),1==t?Ft(5,1,1):2==t?Ft(5,1,2):3==t&&Ft(1,5,0)));5==e&&(0==n&&(Ft(0,1,3),1==t?Ft(4,5,0):2==t?Ft(20,1,2):3==t&&Ft(20,1,1)),1==n&&(Ft(5,1,3),1==t?Ft(3,5,0):2==t?Ft(15,1,2):3==t&&Ft(15,1,1)));0==n&&(2==e&&Bt(0,4-t),3==e&&Bt(1,t));1==n&&(2==e&&Bt(2,4-t),3==e&&Bt(3,t))}(t,r,n))}function kt(e,t,r,n){if(!n){for(var o=0;o<16;o++)Mt[(o+4*r)%16]=e[t][ht[o]];for(o=0;o<16;o++)e[t][ht[o]]=Mt[o];for(o=0;o<8;o++)Mt[(o+2*r)%8]=e[t][vt[o]];for(o=0;o<8;o++)e[t][vt[o]]=Mt[o]}var a=5*r;for(o=0;o<4;o++)for(var f=_[t][o],i=n?bt[t][o]:mt[t][o],l=dt[i],u=n>1?gt[i+4]:gt[i],c=0;c<5;c++,a++)Mt[a%20]=e[f][c*l+u];for(o=0,a=0;o<4;o++)for(f=_[t][o],i=n?bt[t][o]:mt[t][o],l=dt[i],u=n>1?gt[i+4]:gt[i],c=0;c<5;c++,a++)e[f][c*l+u]=Mt[a]}var Lt,wt,yt,Rt,At,Tt,Dt,St=[[[0,1,0],[0,5,1],[0,5,4],[0,1,5]],[[20,1,0],[4,5,1],[4,5,4],[20,1,5]],[[5,1,0],[1,5,1],[1,5,4],[5,1,5]],[[15,1,0],[3,5,1],[3,5,4],[15,1,5]],[[10,1,0],[2,5,1],[2,5,4],[10,1,5]]];function Ft(e,t,r){for(var n=e,o=0;o<5;n+=t,o++)H[r][n]=(H[r][n]+2)%4}function Bt(e,t){for(var r=0;r<4;r++)for(var n=St[e][r],o=n[0],a=0;a<5;o+=n[1],a++)H[n[2]][o]=(H[n[2]][o]+t)%4}var Et,xt,Ut=[],It=[],Pt=[],Ct=[],Wt=[[[0,0],[5,0],[5,1],[0,1]],[[5,0],[5,5],[4,5],[4,0]],[[5,5],[0,5],[0,4],[5,4]],[[0,5],[0,0],[1,0],[1,5]],[[0,1],[5,1],[5,2],[0,2]],[[4,0],[4,5],[3,5],[3,0]],[[0,3],[5,3],[5,4],[0,4]],[[2,0],[2,5],[1,5],[1,0]],[[0,2],[5,2],[5,3],[0,3]],[[3,0],[3,5],[2,5],[2,0]]],Xt=[[1,0],[0,1],[-1,0],[0,-1],[1,0],[0,1],[-1,0],[0,-1],[1,0],[0,1]],Yt=[[1,1,1,1,1,1,1,1,1,-1],[1,1,1,1,1,1,1,1,1,-1],[1,-1,1,-1,1,-1,1,-1,1,1],[1,-1,1,-1,1,-1,1,-1,-1,1],[-1,1,-1,1,-1,1,-1,1,-1,-1],[1,-1,1,-1,1,-1,1,-1,1,1]],qt=[],Ot=[],Qt=[[[1,0,0],[0,0,0],[0,0,1]],[[1,0,0],[0,1,0],[0,0,0]],[[0,0,0],[0,1,0],[0,0,1]]],Nt=[[[0,0,1],[0,0,0],[-1,0,0]],[[0,1,0],[-1,0,0],[0,0,0]],[[0,0,0],[0,0,1],[0,-1,0]]],Zt=[[[0,0,0],[0,1,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,1]],[[1,0,0],[0,0,0],[0,0,0]]],zt=[1,-1,1,-1,1,-1],Ht=[],Gt=[],Kt=[],jt=[],Jt=[],Vt=[],$t=[],_t=[],er=[],tr=[],rr=[],nr=[],or=[[1,0,0,0,0],[0,1,0,0,0],[1,1,0,0,0],[1,1,1,1,1],[1,0,0,0,1],[1,0,0,0,2],[0,0,1,0,0]],ar=[],fr=[[0,2,2,2,2],[2,1,2,2,2],[2,2,2,2,2],[2,2,2,2,2],[0,2,2,2,0],[0,2,2,2,0],[2,2,6,2,2]],ir=[[0,1,2,3,4],[4,3,2,1,0],[0,4,3,1,2]];function lr(){if(un.save(),un.fillStyle=t,1!=Y||0!=ve&&!T?(Yr(un,0,0,Lt,wt),un.fillRect(0,0,Lt,wt)):(Yr(un,0,0,Lt,wt-cn),un.fillRect(0,0,Lt,wt-cn)),Dt=0,ie)pr(te,re,ne,Ve,3,9);else{for(var e=Math.cos(h+s),n=Math.sin(h+s)*zt[u],l=0;l<3;l++){Ht[l]=0,Gt[l]=0;for(var v=0;v<3;v++){var d=Math.floor(u/2);Ht[l]+=te[v]*(Zt[d][l][v]+Qt[d][l][v]*e+Nt[d][l][v]*n),Gt[l]+=re[v]*(Zt[d][l][v]+Qt[d][l][v]*e+Nt[d][l][v]*n)}}xr(Kt,Ht,Gt);var g=Math.cos(h-s),m=Math.sin(h-s)*zt[u];for(l=0;l<3;l++){jt[l]=0,Jt[l]=0;for(v=0;v<3;v++){d=Math.floor(u/2);jt[l]+=te[v]*(Zt[d][l][v]+Qt[d][l][v]*g+Nt[d][l][v]*m),Jt[l]+=re[v]*(Zt[d][l][v]+Qt[d][l][v]*g+Nt[d][l][v]*m)}}xr(Vt,jt,Jt),tr[0]=te,rr[0]=re,nr[0]=ne,tr[1]=Ht,rr[1]=Gt,nr[1]=Kt,tr[2]=jt,rr[2]=Jt,nr[2]=Vt,ar[0]=$e,ar[1]=_e,ar[2]=et,ar[3]=tt,ar[4]=rt,Er(Sr(Tr($t,te),5+D),Sr(Tr(er,j[u]),.4)),Er(Sr(Tr(_t,te),5+D),Sr(Tr(er,j[1^u]),1/6));var b,M=Fr($t,j[u]),p=Fr(_t,j[1^u]);b=M<0&&p>0?0:M>0&&p<0?1:2,pr(tr[or[c][ir[b][0]]],rr[or[c][ir[b][0]]],nr[or[c][ir[b][0]]],ar[ir[b][0]],fr[c][ir[b][0]],0),pr(tr[or[c][ir[b][1]]],rr[or[c][ir[b][1]]],nr[or[c][ir[b][1]]],ar[ir[b][1]],fr[c][ir[b][1]],1),pr(tr[or[c][ir[b][2]]],rr[or[c][ir[b][2]]],nr[or[c][ir[b][2]]],ar[ir[b][2]],fr[c][ir[b][2]],2),pr(tr[or[c][ir[b][3]]],rr[or[c][ir[b][3]]],nr[or[c][ir[b][3]]],ar[ir[b][3]],fr[c][ir[b][3]],3),pr(tr[or[c][ir[b][4]]],rr[or[c][ir[b][4]]],nr[or[c][ir[b][4]]],ar[ir[b][4]],fr[c][ir[b][4]],4)}if(O||R||(he=-1),!(ke>0&&2==Y)){if(!T&&le.length>0){if(le[x].length>0){if(ve>0){un.lineWidth=hn,un.strokeStyle=i;var k=(Lt-2)*function(e,t){for(var r=0,n=0;n<t;n++)e[n]<1e3&&r++;return r}(le[x],U)/qe(le[x]);un.fillStyle=f,un.fillRect(sn,wt-ve-sn,Lt-cn,ve),un.fillStyle=a,un.fillRect(sn,wt-ve-sn,k,ve),un.beginPath(),un.rect(sn,wt-ve-sn,Lt-cn,ve),un.stroke()}var L=Qe(le[x],U)+"/"+Qe(le[x],-1)+Ye[W];un.font="bold "+de+"px helvetica";var w=un.measureText(L).width,y=Lt-w-2,A=wt-ve-Math.floor(3*cn);Q>0?(yr(un,L,ge?y-cn:y,A-de),function(e,t){var n=0==U?Oe(le[x],U):U,o=Pe(le[x],0,n),a=Xe(le[x],n),f=Pe(le[x],n+1,le[x].length),i=e.measureText(o).width,l=e.measureText(a).width,u=e.measureText(f).width,c=1;c+i+l+u>Lt&&(c=Math.min(1,Lt/2-i-l/2),c=Math.max(c,Lt-i-l-u-2));l>0&&(e.fillStyle=r,e.lineWidth=2,e.strokeStyle="black",e.beginPath(),gn<=14?e.fillRect(c+i-1,wt-ve-de-Math.floor(4*cn),l+2,de+Math.floor(3*cn)):e.fillRect(c+i-1,wt-ve-de-Math.floor(2*cn),l+2,de+Math.floor(cn)));i>0&&yr(e,o,c,t);l>0&&yr(e,a,c+i,t);u>0&&yr(e,f,c+i+l,t)}(un,A)):yr(un,L,ge?y-cn:y,A)}if(le.length>1){L=x+1+"/"+le.length,w=un.measureText(L).width,y=Lt-w-q-Math.floor(5*cn);yr(un,L,y,ur()),Nr(un,7,Lt-q/2,q/2)}}X>=0&&(un.font="bold "+de+"px helvetica",yr(un,ce[X],ge?cn:0,ur()))}un.restore(),se&&0!=Y&&function(e){var t=q%2==0?1:0;if(t+=Math.floor(cn+.5)-1,2==Y)return e.fillStyle=0==he||ke>0&&6==he?Jr(o):o,e.fillRect(sn,wt-q,q,q),e.lineWidth=hn,e.strokeStyle=i,e.beginPath(),e.rect(sn,wt-q-sn,q,q),e.stroke(),void Nr(e,0,q/2,wt-(q+1)/2-t);if(1==Y){for(var r=0,n=0;n<7;n++){var a=Math.floor((Lt-r)/(7-n));e.fillStyle=he==n?Jr(o):o,e.fillRect(r,wt,a,q),e.lineWidth=hn,e.strokeStyle=i,e.beginPath(),0==n?e.rect(r+sn,wt-sn,a-cn,q):e.rect(r-sn,wt-sn,a,q),e.stroke(),e.strokeStyle="black",Nr(e,n,r+a/2,wt+q/2-t),r+=a}se=!1}}(un)}function ur(){return gn<10?Math.floor(10*cn):gn<12?Math.floor(12*cn):gn<14?Math.floor(14*cn):de}var cr=[],sr=[],hr=[],vr=[],dr=[[],[],[],[],[],[]],gr=[[],[],[],[],[],[]],mr=[[.1,.1],[.9,.1],[.9,.9],[.1,.9]],br=[[0,0],[0,1],[1,1],[1,0]],Mr=[];function pr(e,t,r,n,o,a){for(var f=0;f<8;f++){var i=(v=Lt<wt?Lt:wt-ve)/3.7*Fr(J[f],t)*S,s=v/3.7*Fr(J[f],r)*S;i/=1-(d=v/(5+D)*Fr(J[f],e)*S)/v,s/=1-d/v,hr[f]=Lt/2+i,vr[f]=0==F?(wt-ve)/2*S-s:2==F?wt-ve-(wt-ve)/2*S-s:(wt-ve)/2-s}for(f=0;f<6;f++)for(var h=0;h<4;h++)dr[f][h]=hr[V[f][h]],gr[f][h]=vr[V[f][h]];if(B)for(f=0;f<6;f++)if(Er(Sr(Tr($t,e),5+D),j[f]),Fr($t,j[f])<0){Sr(Tr(Mr,j[f]),E);var v,d;i=(v=Lt<wt?Lt:wt-ve)/3.7*Fr(Mr,t),s=v/3.7*Fr(Mr,r);i/=1-(d=v/(5+D)*Fr(Mr,e))/v,s/=1-d/v;var g=n[f][0][1]-n[f][0][0],m=n[f][1][1]-n[f][1][0];if(g>0&&m>0)for(var b=0,k=n[f][1][0];b<m;b++,k++)for(var L=0,w=n[f][0][0];L<g;L++,w++){for(h=0;h<4;h++)kr(f,h,cr,sr,w+mr[h][0],k+mr[h][1],M),cr[h]=Math.floor(cr[h]+(M?-i:i)),sr[h]=Math.floor(sr[h]-s);1==Me?(Hr(un,cr,sr,"#fdfdfd"),Gr(un,cr,sr,f,H[f][5*k+w],Z[z[f][5*k+w]])):Hr(un,cr,sr,Z[z[f][5*k+w]])}}var y=0;y=u>3?n[0][0][0]:u<2?n[2][0][0]:n[1][0][0];for(f=0;f<6;f++){g=n[f][0][1]-n[f][0][0],m=n[f][1][1]-n[f][1][0];if(g<=0||m<=0){var A=0;if(0!=y&&4!=y||0!=o?1!=y&&3!=y||1!=o?2==y&&6==o?A=.4:4!=c&&5!=c||2==o&&(1==y&&f%2==0||3==y&&f%2==1)&&(A=.2):A=f%2==u%2?.2:.6:A=.8,0!=A){for(h=0;h<4;h++){var T=$[f][h];cr[h]=Math.floor(dr[f][h]+(dr[1^f][T]-dr[f][h])*A),sr[h]=Math.floor(gr[f][h]+(gr[1^f][T]-gr[f][h])*A),M&&(cr[h]=Lt-cr[h])}Hr(un,cr,sr,l)}}else{for(h=0;h<4;h++)kr(f,h,cr,sr,n[f][0][br[h][0]],n[f][1][br[h][1]],M);a<4?Hr(un,cr,sr,l):(Er(Sr(Tr($t,e),5+D),j[f]),Fr($t,j[f])>0&&Hr(un,cr,sr,l))}}for(f=0;f<6;f++)if(Er(Sr(Tr($t,e),5+D),j[f]),Fr($t,j[f])>0){g=n[f][0][1]-n[f][0][0],m=n[f][1][1]-n[f][1][0];if(g>0&&m>0)for(b=0,k=n[f][1][0];b<m;b++,k++)for(L=0,w=n[f][0][0];L<g;L++,w++){for(h=0;h<4;h++)kr(f,h,cr,sr,w+mr[h][0],k+mr[h][1],M);1==Me?(Hr(un,cr,sr,"#fdfdfd"),Gr(un,cr,sr,f,H[f][5*k+w],Z[z[f][5*k+w]])):Hr(un,cr,sr,Z[z[f][5*k+w]])}if(!p||R)continue;var x=(dr[f][1]-dr[f][0]+dr[f][2]-dr[f][3])/6,U=(dr[f][3]-dr[f][0]+dr[f][2]-dr[f][1])/6,I=(gr[f][1]-gr[f][0]+gr[f][2]-gr[f][3])/6,P=(gr[f][3]-gr[f][0]+gr[f][2]-gr[f][1])/6;if(3==o)for(h=0;h<10;h++){for(T=0;T<4;T++)kr(f,T,Ut[Dt],It[Dt],Wt[h][T][0],Wt[h][T][1],!1);if(Pt[Dt]=(x*Xt[h][0]+I*Xt[h][1])*Yt[f][h],Ct[Dt]=(U*Xt[h][0]+P*Xt[h][1])*Yt[f][h],qt[Dt]=_[f][h%4],h>=8&&(qt[Dt]&=-2),Ot[Dt]=h>3?1:0,8!=Dt&&18!=Dt&&28!=Dt&&9!=Dt&&19!=Dt&&29!=Dt||(Ot[Dt]=6),30==++Dt)break}else if(0==o){if(f!=u&&g>0&&m>0){for(h=5==g?0==n[f][1][0]?0:2:0==n[f][0][0]?3:1,T=0;T<4;T++)kr(f,T,Ut[Dt],It[Dt],Wt[h][T][0],Wt[h][T][1],!1);Pt[Dt]=(x*Xt[h][0]+I*Xt[h][1])*Yt[f][h],Ct[Dt]=(U*Xt[h][0]+P*Xt[h][1])*Yt[f][h],qt[Dt]=u,Ot[Dt]=0,Dt++}}else if(1==o){if(f!=u&&g>0&&m>0){h=5==g?1==n[f][1][0]?0:2:1==n[f][0][0]?3:1;h+=4;for(T=0;T<4;T++)kr(f,T,Ut[Dt],It[Dt],Wt[h][T][0],Wt[h][T][1],!1);Pt[Dt]=(x*Xt[h][0]+I*Xt[h][1])*Yt[f][h],Ct[Dt]=(U*Xt[h][0]+P*Xt[h][1])*Yt[f][h],qt[Dt]=u,Ot[Dt]=1,Dt++}}else if(6==o&&f!=u&&g>0&&m>0){for(h=5==g?8:9,T=0;T<4;T++)kr(f,T,Ut[Dt],It[Dt],Wt[h][T][0],Wt[h][T][1],!1);Pt[Dt]=(x*Xt[h][0]+I*Xt[h][1])*Yt[f][h],Ct[Dt]=(U*Xt[h][0]+P*Xt[h][1])*Yt[f][h],qt[Dt]=u,Ot[Dt]=6,Dt++}}}function kr(e,t,r,n,o,a,f){o/=5,a/=5;var i=dr[e][0]+(dr[e][1]-dr[e][0])*o,l=gr[e][0]+(gr[e][1]-gr[e][0])*o,u=dr[e][3]+(dr[e][2]-dr[e][3])*o,c=gr[e][3]+(gr[e][2]-gr[e][3])*o;r[t]=Math.floor(.5+i+(u-i)*a),n[t]=Math.floor(.5+l+(c-l)*a),f&&(r[t]=Lt-r[t])}var Lr=[1,1,-1,-1,-1,1,1,-1,-1,0,1,0,0,1,0,-1],wr=[];function yr(e,t,r,o){if(ge){e.fillStyle="black";for(var a=0;a<wr.length;a+=2)e.fillText(t,r+wr[a],o+wr[a+1]);e.fillStyle="white"}else e.fillStyle=n;e.fillText(t,r,o)}var Rr=[-1,3,1,-1,0,2,4,-1],Ar=[];function Tr(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Dr(e){var t=Math.sqrt(Fr(e,e));return e[0]/=t,e[1]/=t,e[2]/=t,e}function Sr(e,t){return e[0]*=t,e[1]*=t,e[2]*=t,e}function Fr(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Br(e,t){return e[0]+=t[0],e[1]+=t[1],e[2]+=t[2],e}function Er(e,t){return e[0]-=t[0],e[1]-=t[1],e[2]-=t[2],e}function xr(e,t,r){return e[0]=t[1]*r[2]-t[2]*r[1],e[1]=t[2]*r[0]-t[0]*r[2],e[2]=t[0]*r[1]-t[1]*r[0],e}function Ur(e,t){var r=Math.sin(t),n=Math.cos(t),o=e[1]*n-e[2]*r,a=e[1]*r+e[2]*n;return e[1]=o,e[2]=a,e}function Ir(e,t){var r=Math.sin(t),n=Math.cos(t),o=e[0]*n-e[2]*r,a=e[0]*r+e[2]*n;return e[0]=o,e[2]=a,e}function Pr(e,t){var r=Math.sin(t),n=Math.cos(t),o=e[0]*n-e[1]*r,a=e[0]*r+e[1]*n;return e[0]=o,e[1]=a,e}function Cr(e,t,r){return"#"+Wr(e.toString(16))+Wr(t.toString(16))+Wr(r.toString(16))}function Wr(e){return("00"+e).substring(e.length)}function Xr(e){for(var t=0,r=0;r<6;r++)for(var n=0;n<16;n++)if(e[r].toLowerCase()=="0123456789abcdef".charAt(n)){t++;break}return 6==t}function Yr(e,t,r,n,o){e.beginPath(),e.moveTo(t,r),e.lineTo(t+n,r),e.lineTo(t+n,r+o),e.lineTo(t,r+o),e.lineTo(t,r),e.closePath(),e.clip()}var qr,Or,Qr=[];function Nr(e,t,r,n){switch(r=Math.floor(r),n=Math.floor(n),t){case 0:zr(e,r-Qr[4],n-Qr[3],Qr[3],Qr[6]+1),Zr(e,r+Qr[4],n,-1);break;case 1:zr(e,r+Qr[1],n-Qr[3],Qr[3],Qr[6]+1),Zr(e,r-Qr[1],n,-1);break;case 2:Zr(e,r+Qr[1],n,-1);break;case 3:R?zr(e,r-Qr[4],n-Qr[3],Qr[7],Qr[7]):(zr(e,r-Qr[4],n-Qr[2],Qr[7],Qr[5]),zr(e,r-Qr[2],n-Qr[4],Qr[3],Qr[9]));break;case 4:Zr(e,r-Qr[2],n,1);break;case 5:zr(e,r-Qr[4],n-Qr[3],Qr[3],Qr[6]+1),Zr(e,r,n,1);break;case 6:zr(e,r+Qr[1],n-Qr[3],Qr[3],Qr[6]+1),Zr(e,r-Qr[4],n,1);break;case 7:e.fillStyle=7==he?Jr(o):o,e.fillRect(Lt-q-Qr[1]-sn,Qr[1]+sn,q,q),e.lineWidth=hn,e.strokeStyle=i,e.beginPath(),cn%2==0?e.rect(Lt-q-Qr[1],Qr[1],q,q):e.rect(Lt-q-Qr[1]-sn,Qr[1]+sn,q,q),e.stroke(),Zr(e,r-Qr[3],n+Qr[1],1)}}function Zr(e,t,r,n){var o=3*cn,a=[],f=[];a[0]=t,a[1]=t+n,a[2]=t+4*cn*n,a[3]=t+n,a[4]=t,f[0]=r-o,f[1]=r-o,f[2]=r,f[3]=r+o,f[4]=r+o,function(e,t,r){e.beginPath(),e.moveTo(t[0]+sn,r[0]+sn);for(var n=1;n<5;n++)e.lineTo(t[n]+sn,r[n]+sn);e.closePath(),e.fillStyle="white",e.strokeStyle="black",e.fill(),e.lineWidth=hn,e.stroke()}(e,a,f)}function zr(e,t,r,n,o){e.lineWidth=hn,e.beginPath(),e.rect(t+sn,r+sn,n-1,o-1),e.fillStyle="white",e.fill(),e.strokeStyle="black",e.stroke()}function Hr(e,t,r,n){e.beginPath(),e.moveTo(t[0],r[0]),e.lineTo(t[1],r[1]),e.lineTo(t[2],r[2]),e.lineTo(t[3],r[3]),e.closePath(),e.fillStyle=n,e.strokeStyle=n,e.fill(),e.lineWidth=.7,e.stroke()}function Gr(e,t,r,n,o,a){var f=[],i=[],l=[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]];if(2!=we||"#ffffff"!=a){for(var u=0;u<4;u++)f[u]=Math.floor(t[u]+.05*(t[l[2][u]]-t[u])),i[u]=Math.floor(r[u]+.05*(r[l[2][u]]-r[u]));0==n&&(o=(o+1)%4),4==n&&(o=(o+3)%4);var c=l[o][0],s=l[o][1],h=l[o][2],v=l[o][3],d=.26*(f[h]-f[s]),g=.26*(i[h]-i[s]),m=(f[c]-f[s])/2,b=i[s]+(i[c]-i[s])/2,M=i[h]+(i[v]-i[h])/2,p=(f[v]-f[h])/2,k=1^o;e.fillStyle=a,e.beginPath(),e.moveTo(f[c]+(f[v]-f[c])/2,i[c]+(i[v]-i[c])/2),e.lineTo(f[k]+m,b),e.lineTo(f[k]+d+m,b+g),e.lineTo(f[k]+d,i[k]+g),k=(k+1)%4,e.lineTo(f[k]-d,i[k]-g),e.lineTo(f[k]-d+p,M-g),e.lineTo(f[k]+p,M),e.closePath(),e.fill(),e.lineWidth=.6*cn,e.strokeStyle="black",e.stroke()}}function Kr(e){return"white"==e?"#FFFFFF":"black"==e?"#000000":"#808080"}function jr(e){return"#"!=e.substring(0,1)&&(e=Kr(e)),(299*parseInt(e.substring(1,3),16)+587*parseInt(e.substring(3,5),16)+114*parseInt(e.substring(5,7),16))/1e3}function Jr(e){"#"!=e.substring(0,1)&&(e=Kr(e));var t=parseInt(e.substring(1,3),16),r=parseInt(e.substring(3,5),16),n=parseInt(e.substring(5,7),16);return Cr(t=Math.floor(.7*t),r=Math.floor(.7*r),n=Math.floor(.7*n))}function Vr(e,t){if(e>Ge)setTimeout(Vr,0,e,t);else{if(!C){for(var r=le[x];U<r.length;){if(r[U]>=1e3)X=r[U]-1e3;else if(-1!=r[U]){var n=r[U]%4+1,o=Math.floor(r[U]/4)%7,a=Math.floor(r[U]/28);st(z,a,4==n?2:n,o)}U++}return R=!1,se=!0,lr(),void Ge++}var f,i,l,g,M,p,L=t;m=!1,requestAnimationFrame(function e(){if(D){if(D=!1,p=!1,k)L>0?U>=r.length&&(U=0,Ze(r)):(X=-1,0==U&&(U=r.length));else if(L>0&&U>=r.length||L<0&&0==U)return b=!1,R=!1,Ge++,se=!0,void lr();R=!0,se=!0}if(S&&(S=!1,L<0&&(E=!1,0==U?(E=!0,B=!0):U--),!E)){if(A=!1,-1==r[U]){if(lr(),!P)for(f=Date.now();Date.now()-f<1e3;);}else r[U]>=1e3?X=L>0?r[U]-1e3:-1:A=!0;if(A){n=r[U]%4+1,o=Math.floor(r[U]/4)%7;var t=n<3;if(4==n&&(n=2),L<0&&(t=!t,n=4-n),a=Math.floor(r[U]/28),w=!1,ie=!0,y=!0,h=0,ee[a]>0&&(t=!t),C){M=Math.PI/2,g=t?1:-1;var x=67*v;2==n&&(M=Math.PI,x=67*d),w=!0,u=a,c=o,ct(a),f=Date.now(),i=f,l=g*M/x,s=0}}else F=!0}if(!E&&(A&&(C?s*g<M?(lr(),(m||b)&&(F=!0),i=Date.now(),s=l*(i-f)):(F=!0,me&&!P&&(s-=g*M,lr(),U>0&&U<r.length-1&&(F=!1,U+=L,f=i,i=Date.now(),s=l*(i-f)))):F=!0),F)){if(F=!1,S=!0,A&&(s=0,w=!1,ie=!0,st(z,a,n,o),y=!1,C&&lr(),P&&(p=!0)),L>0){if(++U<r.length&&r[U]>=1e3&&(X=r[U]-1e3,U++),U==r.length)if(T){U=0,Ze(r);for(var I=0;I<6;I++)for(var W=0;W<25;W++)z[I][W]=G[I][W],H[I][W]=K[I][W]}else B=!0}else X=-1;(m||b||p)&&(B=!0)}if(B)return B=!1,D=!0,He<=Ge+1&&(R=!1),se=!0,0==he&&Je(),lr(),T&&(Je(),T=!1),b=!1,void Ge++;requestAnimationFrame(e)});var A=!1,D=!0,S=!0,F=!1,B=!1,E=!1;r=T?ue[0]:le[x]}}document.addEventListener("touchstart",on),document.addEventListener("touchmove",bn),document.addEventListener("touchend",nn),document.addEventListener("mousedown",on),document.addEventListener("mousemove",bn),document.addEventListener("mouseup",nn),document.addEventListener("contextmenu",kn);var $r=!1,_r=!0,en=document.getElementsByTagName("div"),tn=en.length>0&&"wrap"==en[0].className;function rn(e){tn?en[0].style.overflow=e:document.body.style.overflow=e}function nn(e){if($r&&void 0!==e.touches&&(e.preventDefault(),rn("auto")),$r?setTimeout(function(){_r=!0},100):_r=!0,$r=!1,A=!1,O)O=!1,se=!0,lr();else if(w&&!y){w=!1,h+=s,s=0;for(var t=h;t<0;)t+=32*Math.PI;var r=Math.floor(8*t/Math.PI)%16;(be||r%4==0||r%4==3)&&(r=Math.floor((r+2)/4),ee[u]>0&&(r=(4-r)%4),h=0,ie=!0,st(z,u,r,c)),lr()}}function on(e){var t=ln.getBoundingClientRect(),r=Math.floor(t.left),n=Math.floor(t.top);if(void 0===e.touches)var o=e.clientX,a=e.clientY;else o=e.touches[0].clientX,a=e.touches[0].clientY;o<r||o>r+Lt/cn||a<n||a>n+(wt+q)/cn||(e.preventDefault(),$r=!0,_r=!1,void 0!==e.touches&&(e.preventDefault(),rn("hidden")),qr=r,Or=n,At=yt=Mn(e),Tt=Rt=pn(e),g=!1,(he=function(e,t){if(0==Y)return-1;if(le.length>1&&e>=Lt-q&&e<Lt&&t>=0&&t<q)return 7;if(2==Y)return e>=0&&e<q&&t>=wt-q&&t<wt?0:-1;if(t<wt)return-1;for(var r=0,n=0;n<7;n++){var o=(Lt-r)/(7-n);if(e>=r&&e<r+o&&t>=wt&&t<wt+q)return n;r+=o}return-1}(yt,Rt))>=0?(O=!0,3==he?R?je():M=!M:0==he?ke>0&&2==Y?1==pe?(pe=!1,je(),Je()):(pe=!0,Ke(Rr[he=6])):(je(),Je()):7==he?(je(),setTimeout(Je,10),x=x<le.length-1?x+1:0):Ke(Rr[he]),se=!0,lr()):ve>0&&le.length>0&&le[x].length>0&&Rt>wt-ve&&Rt<=wt?L&&(je(),an(He++)):(M&&(At=yt=Lt-yt),void 0===e.touches?!p||R||0!=e.button||e.shiftKey||(g=!0):p&&!R&&(g=!0)))}function an(e){if(e>Ge)setTimeout(an,0,e);else{var t=qe(le[x]),r=Math.floor(((yt-1)*t*2/(Lt-2)+1)/2);(r=Math.max(0,Math.min(t,r)))>0&&(r=Oe(le[x],r)),r>U&&ze(z,le[x],U,r-U,!1),r<U&&ze(z,le[x],r,U-r,!0),U=r,A=!0,lr(),R=!1,Ge++}}var fn,ln,un,cn,sn,hn,vn,dn,gn,mn;Ar=[];function bn(e){if($r&&!O){if(A){je();var t=qe(le[x]),r=Math.floor(((Mn(e)-1)*t*2/(Lt-2)+1)/2);return(r=Math.max(0,Math.min(t,r)))>0&&(r=Oe(le[x],r)),r>U&&ze(z,le[x],U,r-U,!1),r<U&&ze(z,le[x],r,U-r,!0),U=r,void lr()}var n=M?Lt-Mn(e):Mn(e),o=pn(e),a=n-yt,f=o-Rt;if(p&&g&&!w&&!R){At=n,Tt=o;for(var i=0;i<Dt;i++){var l=Ut[i][0],h=Ut[i][1]-l,v=Ut[i][3]-l,d=It[i][0],m=It[i][1]-d,b=It[i][3]-d,k=(b*(yt-l)-v*(Rt-d))/(h*b-v*m),L=(-m*(yt-l)+h*(Rt-d))/(h*b-v*m);if(k>0&&k<1&&L>0&&L<1){if(a*a+f*f<144)return;if(Et=Pt[i],xt=Ct[i],Math.abs(Et*a+xt*f)/Math.sqrt((Et*Et+xt*xt)*(a*a+f*f))>.75){w=!0,u=qt[i],c=Ot[i];break}}}g=!1,yt=At,Rt=Tt}a=(n-yt)/cn,f=(o-Rt)/cn,!w||R?(Dr(Br(te,Sr(Tr(Ar,re),-.016*a))),Dr(xr(re,ne,te)),Dr(Br(te,Sr(Tr(Ar,ne),.016*f))),Dr(xr(ne,te,re)),yt=n,Rt=o):(ie&&ct(u),s=.03*(Et*a+xt*f)/Math.sqrt(Et*Et+xt*xt)),lr()}}function Mn(e){return void 0===e.touches?(e.clientX-qr)*cn:(e.touches[0].clientX-qr)*cn}function pn(e){return void 0===e.touches?(e.clientY-Or)*cn:(e.touches[0].clientY-Or)*cn}function kn(e){_r||e.preventDefault()}function Ln(){clearTimeout(fn),fn=setTimeout(function(){wn(),se=!0,lr()},20)}function wn(){wt=mn.clientHeight-1,Lt=mn.clientWidth-1,ln.style.width=Lt+"px",ln.style.height=wt+"px",cn=devicePixelRatio,sn=cn/2,wt=Math.floor(wt*cn),Lt=Math.floor(Lt*cn),ln.width=Lt,ln.height=wt,hn=cn,q=Math.floor(vn*cn),ve=Math.floor(dn*cn),de=Math.floor(gn*cn);for(var e=1;e<10;e++)Qr[e]=e*cn;for(e=0;e<Lr.length;e++)wr[e]=Lr[e]*cn;1==Y&&(wt-=q)}function yn(e,t){var r,n,o=["R","L","F","B","U","D"],a=["","m","n"],f=["","2","'"],i=-1,l=-1,u=-1,c="";0==t&&(t=10*e);for(var s=0;s<t;s++){for(;i==l||Math.floor(i/2)==Math.floor(l/2)&&i==u;)i=Math.floor(6*Math.random());u=l,l=i,r=Math.floor(3*Math.random()),e<=3?c+=""+o[i]+f[r]+" ":(n=Math.floor(Math.random()*(e>4?3:2)),5==e&&1==n&&(n=0),c+=""+o[i]+a[n]+f[r]+" ")}return c}window.addEventListener("resize",Ln);var Rn=[];function An(){document.removeEventListener("mousedown",on),document.removeEventListener("touchstart",on),document.removeEventListener("touchmove",bn),document.removeEventListener("touchend",nn),document.removeEventListener("mousedown",on),document.removeEventListener("mousemove",bn),document.removeEventListener("mouseup",nn),document.removeEventListener("contextmenu",kn),window.removeEventListener("resize",Ln)}!function(){ln=document.createElement("canvas"),void 0!==e&&function(){for(var t=e.split("&"),r=0;r<t.length;r++){var n=t[r].split("=");void 0!==n[1]&&(Rn[n[0]]=decodeURIComponent(n[1].trim()))}}();var t=Se("id");if(null!=t)(mn=document.getElementById(t)).innerHTML="";else if(null!=document.currentScript)mn=document.currentScript.parentNode;else{var r=document.getElementsByTagName("script"),n=r[r.length-1];mn=n.parentNode}null!=mn.id&&"undefined"!=typeof removeListeners&&(removeListeners[mn.id]=An);for(var o=0;o<6;o++)z[o]=[],H[o]=[],G[o]=[],K[o]=[];for(o=0;o<30;o++)Ut[o]=[],It[o]=[];x=0,h=0,Te()}()}